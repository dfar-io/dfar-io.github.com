<!doctype html><html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Software/DevOps Engineer">
<link rel="shortcut icon" href=https://dfar.io/favicon.ico>
<link rel=stylesheet href=/css/style.min.css>
<title>Integrate Application Insights into a Spring Boot Application</title>
</head>
<body><header id=banner>
<h2><a href=https://dfar.io/>Dave Farinelli</a></h2>
<nav>
<ul>
<li>
<a href=/about/ title=about>about</a>
</li>
</ul>
</nav>
</header>
<main id=content>
<article>
<header id=post-header>
<h1>Integrate Application Insights into a Spring Boot Application</h1><time>April 23, 2020</time></header><p>To get started, we’ll set up a basic Spring Boot application, and then add Application Insights in the next step.</p>
<h2 id=creating-a-skeleton-spring-boot-app>Creating a Skeleton Spring Boot App</h2>
<p>To get started, go to Spring Boot Initializr and create an app with the following selected:</p>
<ul>
<li>Create a <strong>gradle</strong> project</li>
<li>Add the <strong>Spring Web</strong> dependency</li>
</ul>
<p>Once that’s done, extract the archive file given and open in your Java IDE of choice (IntelliJ, for example).</p>
<p>Add the following Controller <code>ApiController.java</code>to add an API endpoint:</p>
<p>Start the application using <code>clean</code>, <code>build</code>, and <code>bootRun</code>. You can verify the endpoint is working with a tool such as Insomnia and calling at <code>http://localhost:8080</code> to have “Hello World!” displayed.</p>
<p>Once you have this working, you’re ready to start integrating Application Insights to provide analytics.</p>
<h2 id=integrating-application-insights>Integrating Application Insights</h2>
<p>First, add the Application Insights dependencies to your <code>build.gradle</code> file:</p>
<p>Then add the <code>Resources/ApplicationInsights.xml</code> file:</p>
<p>Finally, you’ll add the section in startup to add the App Insights Instrumentation Key to the codebase, to link the resource to send data to. A quick note on this – you can add the key to the .xml file, but I prefer to add it in as an environment variable, so this can be changed across different environments when deployed.</p>
<p>Add the following method to the <code>DemoApplication.java</code> file:</p>
<h2 id=verifying-in-app-insights>Verifying in App Insights</h2>
<p>With the changes made in place, the last step is verifying everything is in place. To start the application with App Insights enabled:</p>
<ul>
<li>Add the App Insights Instrumentation Key to an environment variable called <code>AppInsightsKey</code>.</li>
<li>Start the application.</li>
<li>Call the endpoint at <code>http://localhost:8080</code></li>
<li>View the results at the App Insights screen.</li>
</ul>
<h2 id=further-reading>Further Reading</h2>
<p><a href="https://docs.microsoft.com/en-us/azure/azure-monitor/app/java-get-started?tabs=maven">https://docs.microsoft.com/en-us/azure/azure-monitor/app/java-get-started?tabs=maven</a></p>
</article>
</main><footer id=footer>
</footer>
</body>
</html>