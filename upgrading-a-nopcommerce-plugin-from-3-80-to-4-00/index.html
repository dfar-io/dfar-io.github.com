<!doctype html><html><head>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Software/DevOps Engineer">
<link rel="shortcut icon" href=https://dfar.io/favicon.ico>
<link rel=stylesheet href=/css/style.min.css>
<title>Upgrading a NopCommerce Plugin from 3.80 To 4.00</title>
</head>
<body><header id=banner>
<h2><a href=https://dfar.io/>Dave Farinelli</a></h2>
<nav>
<ul>
<li>
<a href=/about/ title=about>about</a>
</li>
</ul>
</nav>
</header>
<main id=content>
<article>
<header id=post-header>
<h1>Upgrading a NopCommerce Plugin from 3.80 To 4.00</h1><time>December 2, 2019</time></header><p>When upgrading nopCommerce, you’ll need to also get the latest versions of plugins to go alongside the nopCommerce installation. Depending on the upgrade, you may need to make some minor changes to the plugin to get it working.</p>
<p>In particular, 3.80 -> 4.00 marks the transition to .NET Core, meaning there are some significant changes to make.</p>
<h2 id=upgrade-the-csproj-file>Upgrade the .csproj File</h2>
<p>To start, you’ll want to upgrade the <code>.csproj</code> file of the project. Easiest option here is to copy an existing plugin that works with nopCommerce 4.00 and modify it accordingly. You can use the <code>Description.txt</code> file to get the information you need.</p>
<h2 id=file-cleanup>File Cleanup</h2>
<p>First, create a <code>plugin.json</code> file.</p>
<p>Delete the following files:</p>
<ul>
<li>web.config</li>
<li>app.config</li>
<li>Description.txt</li>
<li>Properties folder</li>
</ul>
<h2 id=fix-build>Fix Build</h2>
<p>Once you’ve done this, you’ll need to go through the file and make any kind of modifications to get a build to work successfully. If you’re working with VSCode, add the following file <code>omnisharp.json</code> to the plugin:</p>
<p>There are a few specifics to consider:</p>
<ul>
<li>When migrating <code>GetConfigurationRoute</code>, the route will be moved into a <code>Infrastructure/RouteProvider.cs</code> file (as an example).</li>
<li><code>BasePublicController</code> becomes <code>BasePluginController</code>.</li>
<li><code>AdminAuthorize</code> becomes <code>AuthorizeAdmin</code>.</li>
<li>Remove references to <code>ChildActionOnly</code>.</li>
</ul>
<h2 id=validate-functionality>Validate Functionality</h2>
<p>After getting the build to work successfully, the final step is running nopCommerce locally and installing/uninstalling the plugin. In addition, check the functionality to make sure everything is working.</p>
<p>Reminder: when installing/uninstalling plugins in nopCommerce locally, make sure to shut down and restart the application after installing applications to reflect plugin installation changes.</p>
</article>
</main><footer id=footer>
</footer>
</body>
</html>